class ddomr{async init(path,doc){let params=new URLSearchParams(document.location.search.substring(1)),routing=params.get("routing");routing&&(path=routing);const html=await(await fetch(path)).text();window.history.pushState({html:html,pageTitle:"DDOMR Page"},"",path),doc.querySelector("html").innerHTML=html,Array.from(doc.querySelectorAll("ddomr-template")).forEach(async function(e){(new ddomr).loadFromTemplate(e.getAttribute("template-src"),doc,e)}),Array.from(doc.querySelectorAll("script.ddomr-script")).forEach(async function(element){element.hasAttribute("src")?eval(await(await fetch(element.src)).text()):eval(element.innerHTML)})}async change(path,doc){const html=await(await fetch(path)).text();window.history.pushState({html:html},"",path),doc.querySelector("html").innerHTML=html,Array.from(doc.querySelectorAll("ddomr-template")).forEach(async function(e){(new ddomr).loadFromTemplate(e.getAttribute("template-src"),doc,e)}),Array.from(doc.querySelectorAll("script.ddomr-script")).forEach(async function(element){element.hasAttribute("src")?eval(await(await fetch(element.src)).text()):eval(element.innerHTML)})}async jsreload(doc){Array.from(doc.querySelectorAll("script.ddomr-script")).forEach(async function(element){element.hasAttribute("src")?eval(await(await fetch(element.src)).text()):eval(element.innerHTML)})}async loadFromTemplate(e,t,r){t||console.error("DDOMR: Invalid document variable");var a=new DOMParser,o=await(await fetch(e)).text(),l=a.parseFromString(o,"text/html");if(!l)return console.error("DDOMR: Could not find template at path: "+e);var n=l.querySelector("template")?l.querySelector("template").innerHTML:null;if(!n)return console.error("DDOMR: Failed to locate template content in specified template path at: "+e);r.innerHTML=n}}